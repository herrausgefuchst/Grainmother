<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GRAINMOTHER: GRAINMOTHER</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="custom_stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">GRAINMOTHER
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">GRAINMOTHER </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Grainmother - A Multi-Effect Audio Engine based on the BELA Platform</h1>
<p>Grainmother is a customizable multi-effect audio engine built on the BELA platform, designed for musicians and sound designers who want to craft unique sounds without relying on external software. The project combines granular synthesis, reverb, and ring modulation into a single device that is controlled hands-on, rather than through traditional pedal interfaces. <br  />
 The goal of Grainmother is to provide a flexible, standalone effects processor optimized for live performances. By leveraging BELA’s real-time audio processing capabilities and a custom hardware interface, it offers intuitive controls that encourage creative experimentation. <br  />
 This project is fully open-source, with all code and schematics available for those interested in exploring or building upon the device. Grainmother is a practical tool for anyone looking to expand their sound design possibilities in a hardware-based setup.</p>
<h2><a class="anchor" id="ringmodulator"></a>
Ringmodulator</h2>
<p>The Ring Modulator creates unique and complex sound textures by combining the input signal with a carrier signal. It supports advanced modulation types, including diode-based, transistor-based, and a hybrid combination of the two. Additional features include oversampling, bit crushing, and noise modulation.</p>
<h3><a class="anchor" id="parameters"></a>
Parameters</h3>
<p>The Ring Modulator offers extensive control through the following parameters:</p><ul>
<li><b>Tune</b>: Sets the frequency of the carrier signal.</li>
<li><b>Rate</b>: Adjusts the speed of low-frequency modulation.</li>
<li><b>Depth</b>: Determines the intensity of low-frequency modulation.</li>
<li><b>Waveform</b>: Selects the waveform of low-frequency modulation, with options such as:<ul>
<li>Sine</li>
<li>Triangle</li>
<li>Saw</li>
<li>Pulse</li>
<li>Random</li>
</ul>
</li>
<li><b>Saturation</b>: Adds nonlinear distortion to the modulation process, simulating analog behavior.</li>
<li><b>Spread</b>: Introduces a phase shift between left and right channels for stereo widening.</li>
<li><b>Noise</b>: Adds randomized noise ring modulation for a grittier texture.</li>
<li><b>Bitcrush</b>: Reduces the bit depth for digital distortion effects.</li>
</ul>
<h3><a class="anchor" id="chain"></a>
Signal Processing Chain</h3>
<ol type="1">
<li><b>Carrier Signal Generation</b>:<ul>
<li>A configurable oscillator generates the carrier signal, modulated by an additional LFO.</li>
<li>The oscillator supports stereo processing, allowing independent phase shifts for each channel.</li>
</ul>
</li>
<li><b>Bitcrushing</b>:<ul>
<li>The signal can be pre-processed through a bit crusher to reduce bit depth.</li>
</ul>
</li>
<li><b>Ring Modulation</b>:<ul>
<li>The input signal is multiplied by the carrier signal using one of the following algorithms:<ul>
<li><b>Diode-Based Modulation</b>: Simulates the nonlinear behavior of diodes in an analog circuit.</li>
<li><b>Transistor-Based Modulation</b>: Models the asymmetrical response of transistors.</li>
<li><b>Hybrid Modulation</b>: Blends diode and transistor characteristics for a unique tone.</li>
</ul>
</li>
</ul>
</li>
<li><b>Noise and Distortion</b>:<ul>
<li>Optional noise is mixed into the modulation process for added texture.</li>
</ul>
</li>
<li><b>Oversampling</b>:<ul>
<li>The modulation process uses an oversampling ratio of 2x for improved audio fidelity.</li>
<li>An interpolator and decimator handle upsampling and downsampling efficiently.</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="granulator"></a>
Granulator</h2>
<p>The Granulator breaks the input signal into short fragments called grains. Each grain has a defined lifespan (grain length) between 1 and 100 ms and is shaped by an amplitude envelope. The type of envelope can be manually selected, with the options Parabolic, Hann, and Triangular. <br  />
 The distribution of grains is controlled by the parameter Density, which is internally defined as the interonset time between grains in samples. Each grain receives the samples to process from a class called SourceData. This class stores the input samples in a circular buffer, allowing them to be read from variable start points. When a new grain is created, the start position of the read pointer and its reading speed are defined. These parameters are referred to as Initial Delay and Pitch. Using the Glide parameter, a modulation of the reading speed within the grain can be generated. Both Pitch and Glide are limited to a maximum modulation of one octave up or down. Additionally, the reading direction can be inverted using the Reverse parameter. <br  />
 Grain properties such as Panning, Interonset (Density), Grain Length, and Initial Delay can be randomly distributed via the Variation parameter. Low values result in subtle panning variations that create a wider sound, while high values cause strong randomization of all four parameters. This produces fragmented, textural soundscapes.</p>
<h3><a class="anchor" id="chain"></a>
Signal Processing Chain</h3>
<ol type="1">
<li><b>Grain Clouds</b>:<ul>
<li>The stereo input signals are processed independently, resulting in two grain clouds that sum the active grains per channel.</li>
</ul>
</li>
<li><b>Filter</b>:<ul>
<li>The output signal is passed through a lowpass filter, selectable as either a <b>Moog Ladder</b> (-24 dB/octave) or <b>Moog Half Ladder</b> (-12 dB/octave).</li>
<li>The resonance is proportional to the cutoff frequency: lower frequencies result in higher resonance.</li>
<li>Both the filter type and resonance intensity are adjustable.</li>
</ul>
</li>
<li><b>Delay Effect</b>:<ul>
<li>The delay time is directly linked to the <b>Density</b> parameter.</li>
<li>The <b>Delay Speed Ratio</b> parameter adjusts the ratio of the delay time to the interonset time.</li>
</ul>
</li>
<li><b>Dynamic Feedback</b>:<ul>
<li>A dynamic feedback amplitude is calculated based on the output signal amplitude and the <b>Feedback</b> parameter.</li>
<li>The feedback signal is scaled, filtered through a highpass filter, and added back to the input signal.</li>
</ul>
</li>
<li><b>Saturation and Output</b>:<ul>
<li>The final output is saturated using a <b>tanh</b> function to prevent clipping and create a harmonically rich sound.</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="reverb"></a>
Reverb</h2>
<p>The Reverb simulates 24 early reflections using a tap delay, then sends this signal into a late reverberation algorithm similar to those from Schroeder and Moorer. The late reverberation consists of a series of all-pass filters, a set of parallel comb filters, and another set of series all-pass filters. To combine these two elements correctly, the decay has to be delayed to align right after the latest early reflection. In addition, some equalizers can shape the sound. A parametric EQ is implemented pre-FX and used as a “multiplier” of the input signal. A low-cut and high-cut filter can be set upon request; these are implemented post-FX.</p>
<h3><a class="anchor" id="reverbtypes"></a>
The Reverb Types</h3>
<p>The user can change the reverb type, which involves many internal parameter changes (referred to as typeParameters). The EarlyReflections class includes three different reflection simulations: Church, Foyer, and Bathroom. This set of tap delays changes according to the type, as well as a diffusion factor (the all-pass filter gain in the early reflections) and a damping factor (low-pass gain in the early reflections). The decay primarily adjusts the composition of all-pass and comb filters and their corresponding delays. Additionally, damping, diffusion, and the rate and depth of modulating the all-pass filter delay times are type parameters.</p>
<p>Four different types have been implemented: • CHURCH • DIGITAL VINTAGE • SEASICK • ROOM</p>
<p>You can look up the corresponding parameter sets in the <a class="el" href="d6/d6d/class_reverberation_1_1_reverb.html#ac2a890b75bb1b6f330c8c818b81fb601" title="sets a new reverb type">Reverberation::Reverb::setReverbType()</a> function.</p>
<h1><a class="anchor" id="license"></a>
License</h1>
<p>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License </p><dl class="section see"><dt>See also</dt><dd><a href="https://creativecommons.org/licenses/by-sa/4.0/">https://creativecommons.org/licenses/by-sa/4.0/</a> </dd></dl>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
