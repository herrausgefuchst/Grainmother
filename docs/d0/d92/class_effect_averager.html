<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GRAINMOTHER: EffectAverager Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../custom_stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">GRAINMOTHER
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="../../da/d31/class_effect_averager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">EffectAverager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implements a small moving averager of stereo input samples over a large buffer.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../dd/d07/_helpers_8hpp_source.html">Helpers.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2c8e090ccc599aafcadc3f4c557926c0" id="r_a2c8e090ccc599aafcadc3f4c557926c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c8e090ccc599aafcadc3f4c557926c0">EffectAverager</a> ()</td></tr>
<tr class="separator:a2c8e090ccc599aafcadc3f4c557926c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07a4414a0554b8866d34b62b3dbee7cc" id="r_a07a4414a0554b8866d34b62b3dbee7cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07a4414a0554b8866d34b62b3dbee7cc">~EffectAverager</a> ()</td></tr>
<tr class="separator:a07a4414a0554b8866d34b62b3dbee7cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c62b4d657b63e7bb41743a817f9eb1" id="r_aa1c62b4d657b63e7bb41743a817f9eb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1c62b4d657b63e7bb41743a817f9eb1">processAudioSamples</a> (float32x2_t input_)</td></tr>
<tr class="memdesc:aa1c62b4d657b63e7bb41743a817f9eb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">updates the running average.  <br /></td></tr>
<tr class="separator:aa1c62b4d657b63e7bb41743a817f9eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a543df9166a946f71fc30245fe63e5063" id="r_a543df9166a946f71fc30245fe63e5063"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a543df9166a946f71fc30245fe63e5063">isNearZero</a> ()</td></tr>
<tr class="memdesc:a543df9166a946f71fc30245fe63e5063"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the running average is near zero.  <br /></td></tr>
<tr class="separator:a543df9166a946f71fc30245fe63e5063"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1bca0b85a33efdf6e74ad3122589c47c" id="r_a1bca0b85a33efdf6e74ad3122589c47c"><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1bca0b85a33efdf6e74ad3122589c47c">writePointer</a> = 0</td></tr>
<tr class="separator:a1bca0b85a33efdf6e74ad3122589c47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af904b40babec8c7d4d76e6368257e346" id="r_af904b40babec8c7d4d76e6368257e346"><td class="memItemLeft" align="right" valign="top">float32x2_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af904b40babec8c7d4d76e6368257e346">buffer</a> [65536]</td></tr>
<tr class="separator:af904b40babec8c7d4d76e6368257e346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ea9fc24e93408f720b499aec3159da2" id="r_a6ea9fc24e93408f720b499aec3159da2"><td class="memItemLeft" align="right" valign="top">float32x2_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6ea9fc24e93408f720b499aec3159da2">average</a></td></tr>
<tr class="separator:a6ea9fc24e93408f720b499aec3159da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a3e14facfa4aaaab35e57d2e497f4c886" id="r_a3e14facfa4aaaab35e57d2e497f4c886"><td class="memItemLeft" align="right" valign="top">static constexpr uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e14facfa4aaaab35e57d2e497f4c886">bufferLength</a> = 65536</td></tr>
<tr class="separator:a3e14facfa4aaaab35e57d2e497f4c886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdab85ab8e6cba02ade70e5cef57839e" id="r_afdab85ab8e6cba02ade70e5cef57839e"><td class="memItemLeft" align="right" valign="top">static constexpr float32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afdab85ab8e6cba02ade70e5cef57839e">fracment</a> = 1.f / static_cast&lt;float&gt;(<a class="el" href="#a3e14facfa4aaaab35e57d2e497f4c886">bufferLength</a>)</td></tr>
<tr class="separator:afdab85ab8e6cba02ade70e5cef57839e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements a small moving averager of stereo input samples over a large buffer. </p>
<p>The <code><a class="el" href="../../d0/d92/class_effect_averager.html" title="Implements a small moving averager of stereo input samples over a large buffer.">EffectAverager</a></code> class provides functionality to maintain a running average, and determine if the average is near zero. It uses a fixed-size buffer and NEON SIMD operations for efficiency. The class can be used to determine whether an effect could be turned off or not. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2c8e090ccc599aafcadc3f4c557926c0" name="a2c8e090ccc599aafcadc3f4c557926c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c8e090ccc599aafcadc3f4c557926c0">&#9670;&#160;</a></span>EffectAverager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EffectAverager::EffectAverager </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a07a4414a0554b8866d34b62b3dbee7cc" name="a07a4414a0554b8866d34b62b3dbee7cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07a4414a0554b8866d34b62b3dbee7cc">&#9670;&#160;</a></span>~EffectAverager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">EffectAverager::~EffectAverager </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa1c62b4d657b63e7bb41743a817f9eb1" name="aa1c62b4d657b63e7bb41743a817f9eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1c62b4d657b63e7bb41743a817f9eb1">&#9670;&#160;</a></span>processAudioSamples()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EffectAverager::processAudioSamples </td>
          <td>(</td>
          <td class="paramtype">float32x2_t</td>          <td class="paramname"><span class="paramname"><em>input_</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>updates the running average. </p>
<p>This method subtracts the oldest sample in the buffer from the average, stores the new input sample (scaled by the buffer length), and adds the scaled input to the average. The buffer is updated in a circular manner.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input_</td><td>The new input audio sample to be processed (as a 2-channel vector). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a543df9166a946f71fc30245fe63e5063" name="a543df9166a946f71fc30245fe63e5063"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a543df9166a946f71fc30245fe63e5063">&#9670;&#160;</a></span>isNearZero()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EffectAverager::isNearZero </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the running average is near zero. </p>
<p>Compares each channel of the running average with a small epsilon value to determine if they are both close to zero.</p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if both channels of the average are near zero, <code>false</code> otherwise. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3e14facfa4aaaab35e57d2e497f4c886" name="a3e14facfa4aaaab35e57d2e497f4c886"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e14facfa4aaaab35e57d2e497f4c886">&#9670;&#160;</a></span>bufferLength</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint EffectAverager::bufferLength = 65536</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Length of the circular buffer. </p>

</div>
</div>
<a id="afdab85ab8e6cba02ade70e5cef57839e" name="afdab85ab8e6cba02ade70e5cef57839e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdab85ab8e6cba02ade70e5cef57839e">&#9670;&#160;</a></span>fracment</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float32_t EffectAverager::fracment = 1.f / static_cast&lt;float&gt;(<a class="el" href="#a3e14facfa4aaaab35e57d2e497f4c886">bufferLength</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Scaling factor for averaging. </p>

</div>
</div>
<a id="a1bca0b85a33efdf6e74ad3122589c47c" name="a1bca0b85a33efdf6e74ad3122589c47c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bca0b85a33efdf6e74ad3122589c47c">&#9670;&#160;</a></span>writePointer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint EffectAverager::writePointer = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Index to the current write position in the buffer. </p>

</div>
</div>
<a id="af904b40babec8c7d4d76e6368257e346" name="af904b40babec8c7d4d76e6368257e346"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af904b40babec8c7d4d76e6368257e346">&#9670;&#160;</a></span>buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float32x2_t EffectAverager::buffer[65536]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Circular buffer to store audio samples. </p>

</div>
</div>
<a id="a6ea9fc24e93408f720b499aec3159da2" name="a6ea9fc24e93408f720b499aec3159da2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ea9fc24e93408f720b499aec3159da2">&#9670;&#160;</a></span>average</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float32x2_t EffectAverager::average</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Current running average of the audio samples. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../dd/d07/_helpers_8hpp_source.html">Helpers.hpp</a></li>
<li><a class="el" href="../../d2/df4/helpers_8cpp.html">helpers.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
